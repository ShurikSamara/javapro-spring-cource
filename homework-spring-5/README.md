# üíæ –î–æ–º–∞—à–Ω—è—è —Ä–∞–±–æ—Ç–∞ ‚Ññ8 - Spring –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–ª–∞—Ç–µ–∂–µ–π

Spring-–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞–º–∏ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## üìã –ß–∞—Å—Ç–∏ –∑–∞–¥–∞–Ω–∏—è

–í —Ä–∞–º–∫–∞—Ö –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —á–∞—Å—Ç–∏ –∑–∞–¥–∞–Ω–∏—è:

- [X] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω REST-–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ª–∏–º–∏—Ç–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π;

- [X] –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π 
(–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ 10000.00. –°—á–∏—Ç–∞–µ–º, —á—Ç–æ —Ä–∞–∑ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ –æ–Ω –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è);

- [X] –í 00.00 –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è –ª–∏–º–∏—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é;

- [X] –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ –ª–∏–º–∏—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–º–µ–Ω—å—à–µ–Ω –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—É–º–º—É;

- [X] –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–ª–∞—Ç—ë–∂ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ –±—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–∞–Ω–Ω—ã–π
  –ª–∏–º–∏—Ç (–≤—ã–±–æ—Ä –∑–∞ –∫–∞–∂–¥—ã–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —É–º–µ–Ω—å—à–µ–Ω–∏—è/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤)

- [X] –ü–æ—Å–∫–æ–ª—å–∫—É —Å–µ—Ä–≤–∏—Å–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ —É –Ω–∞—Å –Ω–µ—Ç, –≤ –ë–î —Ö—Ä–∞–Ω–∏–º –ª–∏–º–∏—Ç—ã –¥–ª—è ¬´–∫–ª–∏–µ–Ω—Ç–æ–≤¬ª —Å ID 1-100

- [X] –ü–æ—Å–∫–æ–ª—å–∫—É —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ gateway –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –≤ —Å–∏—Å—Ç–µ–º—É –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞, —Ç–æ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ª–∏–º–∏—Ç–∞ —Å ID, 
–∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ë–î, –º—ã —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –ø–æ–¥ –Ω–µ–≥–æ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –ª–∏–º–∏—Ç–∞.

---

---

## üöÄ API Endpoints

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è


```
GET /api/v1/limits/{userId}
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –ª–∏–º–∏—Ç –ø–ª–∞—Ç–µ–∂–µ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å —Å –ª–∏–º–∏—Ç–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**
- `userId` (Long): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º)

**–û—Ç–≤–µ—Ç:**
```json
{
  "userId": 1,
  "currentLimit": 10000.00,
  "defaultLimit": 10000.00,
  "lastUpdated": "2025-07-16T10:30:00"
}
```

### –£–º–µ–Ω—å—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞

```
POST /api/v1/limits/decrease
```

–£–º–µ–Ω—å—à–∞–µ—Ç –ª–∏–º–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞. –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏–º–∏—Ç–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "userId": 1,
  "amount": 1000.00
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "userId": 1,
  "currentLimit": 9000.00,
  "defaultLimit": 10000.00,
  "lastUpdated": "2025-07-16T10:30:00"
}
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞

```
POST /api/v1/limits/restore
```

–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ª–∏–º–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞. –õ–∏–º–∏—Ç –Ω–µ –ø—Ä–µ–≤—ã—Å–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "userId": 1,
  "amount": 1000.00
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "userId": 1,
  "currentLimit": 10000.00,
  "defaultLimit": 10000.00,
  "lastUpdated": "2025-07-16T10:30:00"
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ—à–∏–±–∫–∏ —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏:

```json
{
  "timestamp": "2025-07-16T10:30:00",
  "status": 400,
  "message": "Validation error: userId: User ID is required",
  "path": "/api/v1/limits/decrease"
}
```

## ‚öôÔ∏è–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î

1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL —Å –∏–º–µ–Ω–µ–º `limits_db`
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `limits_user` —Å –ø–∞—Ä–æ–ª–µ–º `limits_pass`
3. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –≤—Å–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏ –¥–ª—è `limits_db` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `limits_user`

```sql
CREATE DATABASE limits_db;
CREATE USER limits_user WITH PASSWORD 'limits_pass';
GRANT ALL PRIVILEGES ON DATABASE limits_db TO limits_user;
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `application.yaml`:

```yaml
limits-service:
  default-limit: 10000.00 # –õ–∏–º–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  reset-cron: "0 0 0 * * *"  # Cron-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–æ–≤ (–ø–æ–ª–Ω–æ—á—å)

spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/limits_db
    username: limits_user
    password: limits_pass
```

## üèÉ–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è Maven

```bash
mvn spring-boot:run
```